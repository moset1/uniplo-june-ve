# 옷 쇼핑몰 Uniplo 백엔드 팀 프로젝트

## 1. 프로젝트 개요

본 프로젝트는 Spring Boot를 기반으로 한 백엔드 애플리케이션으로, 기본적인 **회원 관리(가입)** 와 **게시판(CRUD)** 기능을 제공합니다. RESTful API를 통해 클라이언트와 통신하며, 안정적이고 확장 가능한 백엔드 시스템을 구축하는 것을 목표로 합니다. 

### 팀원 및 역할
| 이름   | 역할             | 주요 담당 기능            |
| ------ | ---------------- | ------------------------- |
| 김모세 | 팀장, 백엔드 개발 | 회원가입, 게시판, DB 설계 |
| 이주열 | 백엔드 개발      | 쇼핑 아이템 관리          |
| 방해준 | 백엔드 개발      | 게시판 기능               |
| 방서연 | 백엔드 개발      | 장바구니 기능             |

## 2. 시스템 아키텍처

본 프로젝트는 일반적인 **계층형 아키텍처(Layered Architecture)** 를 따릅니다. 각 계층은 명확한 책임을 가지며, 이를 통해 코드의 응집도를 높이고 결합도를 낮춥니다.


### 데이터베이스 설계 (ERD)
<details>
<summary>ERD 다이어그램 보기 (클릭)</summary>
<br>
<img width="100%" alt="쇼핑몰 DB 설계" src="https://github.com/user-attachments/assets/7f965626-e867-45f4-9389-6a57f8d002b8" />
</details>

#### 설계 담당 파트
*   주문 취소, 교환, 환불, 반품 관련 로직 및 데이터 모델링

#### 주요 설계 고려사항: 상태 관리(State Management)
*   **문제 정의**: 주문 취소, 교환, 환불 등은 배송 상태(배송 전, 배송 중 등)와 밀접하게 연관되어 복잡한 상태 변화를 가집니다. 예를 들어, '배송 전' 주문은 즉시 취소 가능하지만, '배송 완료' 후에는 '반품' 절차를 거쳐야 합니다.
*   **해결 방안**:
    *   **상태 컬럼 도입**: `orders`, `refunds` 등 주요 엔티티에 `status`와 같은 상태 관리 컬럼을 추가하여 각 엔티티의 현재 상태를 명확히 추적하도록 했습니다.
    *   **상태 관리 테이블**: 모든 상태(예: '환불대기', '환불완료')를 별도의 `status_management` 테이블에서 코드로 관리하여 일관성을 유지하고, 향후 상태 추가/변경에 유연하게 대처할 수 있도록 설계했습니다.
*   **프로세스 예시 (환불)**:
    1.  사용자가 주문 취소를 요청하면, `refunds` 테이블에 새로운 레코드가 `환불대기` 상태로 생성됩니다.
    2.  관리자가 해당 요청을 확인하고 처리함에 따라, 레코드의 상태는 `조정요청`, `환불보류`, `환불완료` 등으로 변경됩니다.
    3.  이를 통해 사용자와 관리자는 각자의 화면에서 현재 처리 상태를 명확하게 파악할 수 있습니다.


## 3. 기술 스택
| 구분        | 기술                   | 비고                               |
| ----------- | ---------------------- | ---------------------------------- |
| Language    | Java 17                |                                    |
| Framework   | Spring Boot 3.x        |                                    |
| Database    | MySQL 8.0              |                                    |
| Persistence | MyBatis                | SQL Mapper                         |
| View        | JSP (JavaServer Pages) |                                    |
| Build Tool  | Gradle                 |                                    |

## 4. 주요 설계 고려사항

### 공통
*   **DTO (Data Transfer Object) 활용**:
    *   각 계층 간 데이터 전송 시 DTO를 사용하여 역할을 명확히 분리했습니다.
  
*   **RESTful API 설계**:
    *   HTTP Method(GET, POST, PUT, DELETE)와 URI를 통해 리소스에 대한 행위를 명확하게 표현하고자 했습니다.
    *   예: `GET /posts/{id}`는 특정 게시글 조회를, `DELETE /posts/{id}`는 삭제를 의미합니다.
*   **전역 예외 처리 (Global Exception Handling)**:
    *   `@RestControllerAdvice`와 `@ExceptionHandler`를 사용하여 특정 예외(예: `PostNotFoundException`) 발생 시 일관된 형식의 오류 응답을 클라이언트에 반환하도록 설계했습니다.

### 회원가입 기능
*   **비밀번호 암호화**:
    *   사용자의 비밀번호는 보안을 위해 `BCryptPasswordEncoder`와 같은 단방향 해시 함수를 사용하여 암호화 후 데이터베이스에 저장합니다. 이를 통해 데이터베이스가 유출되더라도 원본 비밀번호를 알 수 없도록 보호합니다.
*   **입력값 유효성 검사 (Validation)**:
    *   `spring-boot-starter-validation` 의존성을 활용하여 사용자 ID, 비밀번호, 이메일 등의 형식이 올바른지 서버 단에서 검증합니다. `@NotBlank`, `@Email`, `@Size` 등의 어노테이션을 사용해 비즈니스 로직과 유효성 검증 로직을 분리했습니다.
*   **사용자 ID 중복 확인**:
    *   회원가입 시 이미 존재하는 사용자 ID로 가입을 시도할 경우, 데이터베이스의 `UNIQUE` 제약 조건과 서비스 계층의 로직을 통해 중복을 방지하고 적절한 오류 메시지를 반환합니다.

### 게시판 기능
*   **Entity와 DTO 분리**:
    *   `PostDto`는 데이터베이스 테이블의 데이터를 전달하는 핵심 객체로, MyBatis의 Mapper를 통해 데이터 영속성을 처리합니다.
    *   `PostController`에서는 이 `PostDto`를 직접 사용하여 클라이언트의 요청을 처리하고 응답을 생성함으로써, 계층 간 데이터 전달의 역할을 명확히 했습니다.
*   **명확한 책임 분리**:
    *   `PostController`는 HTTP 요청 처리, `PostService`는 게시글 관련 비즈니스 로직 처리, `PostRepository`는 데이터 영속성 처리로 역할을 명확히 나누어 유지보수성을 향상시켰습니다.


### 향후 개선 및 고려사항
*   **MyBatis의 한계와 JPA 도입**: 관계형 데이터베이스와 객체 지향 패러다임의 불일치 문제로 인해, DTO나 테이블 스키마 변경 시 MyBatis Mapper, Repository, Service, Controller에 걸쳐 수정이 필요한 경우가 많습니다. 향후 유지보수성 향상을 위해 JPA 도입을 고려할 수 있습니다.
*   **인증/인가 고도화**: 현재 세션 기반의 로그인 방식을 향후 Spring Security와 JWT(Json Web Token)를 사용한 인증/인가 방식으로 고도화할 수 있습니다. 더 나아가 OAuth2를 활용한 소셜 로그인 기능 도입도 가능합니다.
